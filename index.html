<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forex Radar: One stop solution to tracking Visa / Master Card exchange rates.</title>
  <meta name="description" content="Track historical Visa and Mastercard exchange rates with real markup percentages. See what you're actually paying when you swipe abroad.">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            display: ['"Space Grotesk"', 'system-ui', 'sans-serif'],
            body: ['"DM Sans"', 'system-ui', 'sans-serif'],
          },
        },
      },
    }
  </script>
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/styles.css">
  
  <!-- ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts@5.3.6/dist/apexcharts.min.js"></script>
</head>

<body>
  <!-- Animated Background -->
  <div class="bg-pattern">
    <div class="bg-grid"></div>
    <div class="bg-blob bg-blob-1"></div>
    <div class="bg-blob bg-blob-2"></div>
    <div class="bg-blob bg-blob-3"></div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <!-- Logo -->
      <a href="/" class="logo">
        <div class="logo-icon">
          <!-- Radar rings animation -->
          <div class="radar-ring radar-ring-1"></div>
          <div class="radar-ring radar-ring-2"></div>
          <div class="radar-ring radar-ring-3"></div>
          <div class="radar-sweep"></div>
          <!-- Center dot -->
          <div class="radar-center"></div>
        </div>
        <div class="logo-text-wrapper">
          <span class="logo-text">Forex Radar</span>
        </div>
      </a>
      
      <!-- Theme Toggle -->
      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
        <div class="theme-toggle-track">
          <div class="theme-toggle-stars">
            <span></span><span></span><span></span>
          </div>
          <div class="theme-toggle-clouds">
            <span></span><span></span>
          </div>
        </div>
        <div class="theme-toggle-thumb">
          <svg class="theme-icon sun-icon" viewBox="0 0 24 24" fill="currentColor">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" fill="none"/>
          </svg>
          <svg class="theme-icon moon-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </div>
      </button>
    </div>
  </header>

  <!-- Hero Section - Unique Radar-Inspired Design -->
  <section class="hero">
    <div class="hero-content">
      <!-- Radar visualization background -->
      <div class="hero-radar-visual">
        <div class="radar-grid">
          <div class="radar-circle radar-circle-1"></div>
          <div class="radar-circle radar-circle-2"></div>
          <div class="radar-circle radar-circle-3"></div>
          <div class="radar-beam"></div>
        </div>
        <!-- Currency blips that appear on the radar -->
        <div class="radar-blips">
          <span class="radar-blip" style="--angle: 45deg; --distance: 80px;" data-currency="EUR">€</span>
          <span class="radar-blip" style="--angle: 120deg; --distance: 130px;" data-currency="GBP">£</span>
          <span class="radar-blip" style="--angle: 200deg; --distance: 180px;" data-currency="JPY">¥</span>
          <span class="radar-blip" style="--angle: 280deg; --distance: 110px;" data-currency="INR">₹</span>
          <span class="radar-blip" style="--angle: 340deg; --distance: 160px;" data-currency="KRW">₩</span>
        </div>
      </div>
      
      <!-- Main content - asymmetric layout -->
      <div class="hero-main">
        <h1 class="hero-title">
          <span class="hero-title-line">Decode the</span>
          <span class="hero-title-line">
            <span class="gradient-text">hidden costs</span>
          </span>
          <span class="hero-title-line hero-title-small">of swiping abroad.</span>
        </h1>
        
        <p class="hero-description">
          Real Visa & Mastercard rates. Real markup data.<br>
          <strong>365+ days of history</strong> to help you time your transactions.
        </p>
        
        <!-- Stats inline -->
        <div class="hero-stats">
          <div class="hero-stat">
            <span class="hero-stat-number">150+</span>
            <span class="hero-stat-label">Currencies</span>
          </div>
          <div class="hero-stat">
            <span class="hero-stat-number">365+</span>
            <span class="hero-stat-label">
              Days History
              <span class="info-tooltip" data-tooltip="Data cached locally in your browser. Request server archiving for persistent 365+ day history.">
                <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="9" fill="none" stroke="currentColor" stroke-width="1.5"/><text x="10" y="14" text-anchor="middle" font-size="11" font-weight="600">?</text></svg>
              </span>
            </span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Currency Selector -->
  <section class="selector-container" data-animate>
    <div class="selector-card">
      <div class="selector-grid">
        <div class="selector-group">
          <label for="from-currency-input" class="selector-label">From Currency</label>
          <div class="searchable-dropdown" id="from-currency-dropdown">
            <input 
              type="text" 
              id="from-currency-input" 
              class="selector-input searchable-input"
              placeholder="Search currency..."
              autocomplete="off"
              role="combobox"
              aria-expanded="false"
              aria-controls="from-currency-list"
              aria-autocomplete="list"
            >
            <input type="hidden" id="from-currency" name="from-currency">
            <div class="dropdown-list" id="from-currency-list" role="listbox"></div>
          </div>
        </div>
        
        <button id="swap-currencies" class="selector-arrow" type="button" aria-label="Swap currencies" title="Swap currencies">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <path d="M7 16l-4-4m0 0l4-4m-4 4h18M17 8l4 4m0 0l-4 4m4-4H3"/>
          </svg>
        </button>
        
        <div class="selector-group">
          <label for="to-currency-input" class="selector-label">To Currency</label>
          <div class="searchable-dropdown" id="to-currency-dropdown">
            <input 
              type="text" 
              id="to-currency-input" 
              class="selector-input searchable-input"
              placeholder="Search currency..."
              autocomplete="off"
              role="combobox"
              aria-expanded="false"
              aria-controls="to-currency-list"
              aria-autocomplete="list"
            >
            <input type="hidden" id="to-currency" name="to-currency">
            <div class="dropdown-list" id="to-currency-list" role="listbox"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Recent Pairs -->
    <div id="recent-pairs" class="recent-pairs hidden">
      <span class="recent-pairs-label">Recent:</span>
      <div id="recent-pairs-list" class="recent-pairs-list"></div>
    </div>
  </section>

  <!-- Loader -->
  <section id="loader" class="hidden">
    <div class="loader-container">
      <div class="loader-spinner"></div>
      <span id="loader-text" class="loader-text">Loading exchange rates...</span>
    </div>
  </section>

  <!-- Stats Bar -->
  <section id="stats-bar" class="stats-container hidden">
    <div class="stats-grid">
      <div class="stat-card" data-animate>
        <div class="stat-label">
          Current Rate
          <span class="info-tooltip" data-tooltip="Most recent exchange rate available. Rates update daily after 12pm ET.">
            <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="9" fill="none" stroke="currentColor" stroke-width="1.5"/><text x="10" y="14" text-anchor="middle" font-size="11" font-weight="600">?</text></svg>
          </span>
        </div>
        <div class="stat-value-row">
          <div id="stat-current" class="stat-value accent">-</div>
          <div id="stat-percentile" class="percentile-badge hidden" title="Percentile rank within selected time period">
            <span class="percentile-value">-</span>
            <span class="percentile-label">percentile</span>
          </div>
        </div>
      </div>
      
      <div class="stat-card" data-animate>
        <div class="stat-label">
          Highest
          <span class="info-tooltip" data-tooltip="Highest rate across both Visa and Mastercard in the displayed time period.">
            <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="9" fill="none" stroke="currentColor" stroke-width="1.5"/><text x="10" y="14" text-anchor="middle" font-size="11" font-weight="600">?</text></svg>
          </span>
        </div>
        <div id="stat-high" class="stat-value high">-</div>
      </div>
      
      <div class="stat-card" data-animate>
        <div class="stat-label">
          Lowest
          <span class="info-tooltip" data-tooltip="Lowest rate across both Visa and Mastercard in the displayed time period.">
            <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="9" fill="none" stroke="currentColor" stroke-width="1.5"/><text x="10" y="14" text-anchor="middle" font-size="11" font-weight="600">?</text></svg>
          </span>
        </div>
        <div id="stat-low" class="stat-value low">-</div>
      </div>
      
      <div class="stat-card" data-animate>
        <div class="stat-label">
          Avg Visa Markup
          <span class="info-tooltip" data-tooltip="Visa's average markup over ECB mid-market rate. Mastercard does not provide markup data.">
            <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="9" fill="none" stroke="currentColor" stroke-width="1.5"/><text x="10" y="14" text-anchor="middle" font-size="11" font-weight="600">?</text></svg>
          </span>
        </div>
        <div id="stat-markup" class="stat-value markup">-</div>
      </div>
      
      <div class="stat-card" data-animate>
        <div class="stat-label">
          MC vs Visa
          <span class="info-tooltip" data-tooltip="Current rate difference (Mastercard - Visa). Negative means MC is cheaper.">
            <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="9" fill="none" stroke="currentColor" stroke-width="1.5"/><text x="10" y="14" text-anchor="middle" font-size="11" font-weight="600">?</text></svg>
          </span>
        </div>
        <div id="stat-spread" class="stat-value">-</div>
      </div>
      
      <div class="stat-card" data-animate>
        <div class="stat-label">
          Better Rate
          <span class="info-tooltip" data-tooltip="Which provider currently offers the lower (better) rate for buyers.">
            <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="9" fill="none" stroke="currentColor" stroke-width="1.5"/><text x="10" y="14" text-anchor="middle" font-size="11" font-weight="600">?</text></svg>
          </span>
        </div>
        <div id="stat-better-provider" class="stat-value">-</div>
      </div>
    </div>
    <div class="stats-actions">
      <button id="copy-rate-btn" class="action-btn" type="button" title="Copy current rate">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
        <span>Copy Rate</span>
      </button>
      <button id="share-url-btn" class="action-btn" type="button" title="Copy shareable link">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="18" cy="5" r="3"></circle>
          <circle cx="6" cy="12" r="3"></circle>
          <circle cx="18" cy="19" r="3"></circle>
          <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
          <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
        </svg>
        <span>Share</span>
      </button>
      <button id="download-chart-btn" class="action-btn" type="button" title="Download chart as PNG">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        <span>Download</span>
      </button>
    </div>
    <div id="last-updated" style="text-align: center; margin-top: 1rem; font-size: 0.75rem; color: var(--text-tertiary);"></div>
  </section>

  <!-- Time Range Selector -->
  <section id="time-range-selector" class="time-range-container hidden">
    <div class="time-range-buttons">
      <button class="time-range-btn" data-range="1m">1M</button>
      <button class="time-range-btn" data-range="3m">3M</button>
      <button class="time-range-btn" data-range="6m">6M</button>
      <button class="time-range-btn active" data-range="1y">1Y</button>
      <button class="time-range-btn" data-range="5y">5Y</button>
      <button class="time-range-btn" data-range="all">All</button>
    </div>
  </section>

  <!-- Series Toggles -->
  <section id="series-toggles" class="series-toggles-container hidden">
    <div class="series-toggles">
      <label class="series-toggle">
        <input type="checkbox" id="toggle-visa-rate" checked>
        <span class="toggle-indicator visa-rate"></span>
        <span class="toggle-label">Visa Rate</span>
      </label>
      <label class="series-toggle">
        <input type="checkbox" id="toggle-mc-rate" checked>
        <span class="toggle-indicator mc-rate"></span>
        <span class="toggle-label">Mastercard Rate</span>
      </label>
      <label class="series-toggle">
        <input type="checkbox" id="toggle-ecb-rate" checked>
        <span class="toggle-indicator ecb-rate"></span>
        <span class="toggle-label">ECB Rate</span>
      </label>
      <label class="series-toggle">
        <input type="checkbox" id="toggle-visa-markup" checked>
        <span class="toggle-indicator visa-markup"></span>
        <span class="toggle-label">Visa Markup</span>
      </label>
    </div>
  </section>

  <!-- Chart Container -->
  <section id="chart-container" class="chart-container hidden">
    <div class="chart-card" data-animate>
      <div id="chart" style="min-height: 420px;"></div>
    </div>
  </section>

  <!-- Empty State -->
  <section id="empty-state" class="empty-state">
    <div class="empty-card" data-animate>
      <div class="empty-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
        </svg>
      </div>
      <h3 class="empty-title font-display">Select a currency pair</h3>
      <p class="empty-description">Choose your source and target currencies above to view historical exchange rates and markup percentages.</p>
    </div>
  </section>

  <!-- Request Archiving Link (only visible for non-archived pairs) -->
  <div id="archiving-section" style="text-align: center; padding: 1rem 2rem; display: none;">
    <p style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.5rem;">
      ⚠️ This pair is not archived on server. Only showing ~7 days of live data.
    </p>
    <a id="request-archiving" href="#" target="_blank" class="footer-link" style="font-size: 0.75rem;">
      <svg style="width: 14px; height: 14px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
      </svg>
      Request server-side archiving for 365 days of history
    </a>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div style="max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; gap: 1rem; align-items: center;">
      <!-- Data source -->
      <p class="footer-text" style="margin: 0;">Data sourced from Visa and Mastercard. Historical data available from date of addition - 365 days.</p>
      
      <!-- Attribution -->
      <p style="margin: 0; font-size: 0.9rem; color: var(--text-secondary); display: flex; align-items: center; gap: 0.4rem;">
        Made with 
        <svg style="width: 16px; height: 16px; color: #e63946; animation: pulse 2s ease-in-out infinite;" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
        by 
        <a href="https://github.com/avishj" target="_blank" rel="noopener noreferrer" style="color: var(--text-primary); text-decoration: none; font-weight: 500; transition: color 0.2s;" onmouseover="this.style.color='var(--primary)'" onmouseout="this.style.color='var(--text-primary)'">Avish J</a>
      </p>
      
      <!-- GitHub Links -->
      <div style="display: flex; gap: 0.75rem; align-items: center; font-size: 0.875rem;">
        <a href="https://github.com/avishj/ForexRadar" target="_blank" rel="noopener noreferrer" class="footer-link" style="display: flex; align-items: center; gap: 0.4rem;">
          <svg viewBox="0 0 24 24" fill="currentColor" style="width: 18px; height: 18px;">
            <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
          </svg>
          View Repository
        </a>
        <span style="color: var(--text-tertiary);">·</span>
        <a href="https://github.com/avishj/ForexRadar/stargazers" target="_blank" rel="noopener noreferrer" class="footer-link" style="display: flex; align-items: center; gap: 0.4rem;">
          <svg viewBox="0 0 24 24" fill="currentColor" style="width: 16px; height: 16px;">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          Star
        </a>
      </div>
      
      <!-- Copyright -->
      <p style="margin: 0; font-size: 0.75rem; color: var(--text-tertiary);">© <span id="copyright-year"></span></p>
    </div>
  </footer>

  <style>
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
  </style>

  <script>
    // Update copyright year
    const currentYear = new Date().getFullYear();
    document.getElementById('copyright-year').textContent = currentYear > 2024 ? `2024-${currentYear}` : '2024';
  </script>

  <!-- Notification Container -->
  <div id="notification-container"></div>

  <!-- Theme Script (inline to prevent flash) -->
  <script>
    const savedTheme = localStorage.getItem('theme');
    // Default to dark mode if no saved preference
    if (savedTheme !== 'light') {
      document.documentElement.classList.add('dark');
      document.documentElement.classList.remove('light');
    } else {
      document.documentElement.classList.add('light');
      document.documentElement.classList.remove('dark');
    }
  </script>

  <!-- Load Scripts -->
  <script type="module" src="js/theme.js"></script>
  <script type="module" src="js/animations.js"></script>
  <script type="module" src="js/app.js"></script>
</body>

</html>
