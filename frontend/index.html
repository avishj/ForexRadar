<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forex Radar: One stop solution to tracking Visa / Master Card exchange rates.</title>
  <meta name="description" content="Track historical Visa and Mastercard exchange rates with real markup percentages. See what you're actually paying when you swipe abroad.">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            display: ['"Space Grotesk"', 'system-ui', 'sans-serif'],
            body: ['"DM Sans"', 'system-ui', 'sans-serif'],
          },
        },
      },
    }
  </script>
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/styles.css">
  
  <!-- ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts@4.5.0/dist/apexcharts.min.js"></script>
  
  <!-- sql.js -->
  <script src="https://sql.js.org/dist/sql-wasm.js"></script>
</head>

<body>
  <!-- Animated Background -->
  <div class="bg-pattern">
    <div class="bg-grid"></div>
    <div class="bg-blob bg-blob-1"></div>
    <div class="bg-blob bg-blob-2"></div>
    <div class="bg-blob bg-blob-3"></div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <!-- Logo -->
      <a href="/" class="logo">
        <div class="logo-icon">
          <!-- Radar rings animation -->
          <div class="radar-ring radar-ring-1"></div>
          <div class="radar-ring radar-ring-2"></div>
          <div class="radar-ring radar-ring-3"></div>
          <div class="radar-sweep"></div>
          <!-- Center dot -->
          <div class="radar-center"></div>
        </div>
        <div class="logo-text-wrapper">
          <span class="logo-text">Forex Radar</span>
        </div>
      </a>
      
      <!-- Theme Toggle -->
      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
        <div class="theme-toggle-track">
          <div class="theme-toggle-stars">
            <span></span><span></span><span></span>
          </div>
          <div class="theme-toggle-clouds">
            <span></span><span></span>
          </div>
        </div>
        <div class="theme-toggle-thumb">
          <svg class="theme-icon sun-icon" viewBox="0 0 24 24" fill="currentColor">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" fill="none"/>
          </svg>
          <svg class="theme-icon moon-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </div>
      </button>
    </div>
  </header>

  <!-- Hero Section - Unique Radar-Inspired Design -->
  <section class="hero">
    <div class="hero-content">
      <!-- Radar visualization background -->
      <div class="hero-radar-visual">
        <div class="radar-grid">
          <div class="radar-circle radar-circle-1"></div>
          <div class="radar-circle radar-circle-2"></div>
          <div class="radar-circle radar-circle-3"></div>
          <div class="radar-beam"></div>
        </div>
        <!-- Currency blips that appear on the radar -->
        <div class="radar-blips">
          <span class="radar-blip" style="--angle: 45deg; --distance: 80px;" data-currency="EUR">€</span>
          <span class="radar-blip" style="--angle: 120deg; --distance: 130px;" data-currency="GBP">£</span>
          <span class="radar-blip" style="--angle: 200deg; --distance: 180px;" data-currency="JPY">¥</span>
          <span class="radar-blip" style="--angle: 280deg; --distance: 110px;" data-currency="INR">₹</span>
          <span class="radar-blip" style="--angle: 340deg; --distance: 160px;" data-currency="KRW">₩</span>
        </div>
      </div>
      
      <!-- Main content - asymmetric layout -->
      <div class="hero-main">
        <h1 class="hero-title">
          <span class="hero-title-line">Decode the</span>
          <span class="hero-title-line">
            <span class="gradient-text">hidden costs</span>
          </span>
          <span class="hero-title-line hero-title-small">of swiping abroad.</span>
        </h1>
        
        <p class="hero-description">
          Real Visa & Mastercard rates. Real markup data.<br>
          <strong>365+ days of history</strong> to help you time your transactions.
        </p>
        
        <!-- Stats inline -->
        <div class="hero-stats">
          <div class="hero-stat">
            <span class="hero-stat-number">150+</span>
            <span class="hero-stat-label">Currencies</span>
          </div>
          <div class="hero-stat">
            <span class="hero-stat-number">365+</span>
            <span class="hero-stat-label">Days History</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Currency Selector -->
  <section class="selector-container" data-animate>
    <div class="selector-card">
      <div class="selector-grid">
        <div class="selector-group">
          <label for="from-currency" class="selector-label">From Currency</label>
          <select id="from-currency" class="selector-input">
            <option value="">Select currency...</option>
          </select>
        </div>
        
        <div class="selector-arrow">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </div>
        
        <div class="selector-group">
          <label for="to-currency" class="selector-label">To Currency</label>
          <select id="to-currency" class="selector-input">
            <option value="">Select currency...</option>
          </select>
        </div>
      </div>
    </div>
  </section>

  <!-- Loader -->
  <section id="loader" class="hidden">
    <div class="loader-container">
      <div class="loader-spinner"></div>
      <span id="loader-text" class="loader-text">Loading exchange rates...</span>
    </div>
  </section>

  <!-- Stats Bar -->
  <section id="stats-bar" class="stats-container hidden">
    <div class="stats-grid">
      <div class="stat-card" data-animate>
        <div class="stat-label">Current Rate</div>
        <div id="stat-current" class="stat-value accent">-</div>
      </div>
      
      <div class="stat-card" data-animate>
        <div class="stat-label">Highest</div>
        <div id="stat-high" class="stat-value high">-</div>
      </div>
      
      <div class="stat-card" data-animate>
        <div class="stat-label">Lowest</div>
        <div id="stat-low" class="stat-value low">-</div>
      </div>
      
      <div class="stat-card" data-animate>
        <div class="stat-label">Avg Markup</div>
        <div id="stat-markup" class="stat-value markup">-</div>
      </div>
    </div>
    <div id="last-updated" style="text-align: center; margin-top: 1rem; font-size: 0.75rem; color: var(--text-tertiary);"></div>
  </section>

  <!-- Chart Container -->
  <section id="chart-container" class="chart-container hidden">
    <div class="chart-card" data-animate>
      <div id="chart" style="min-height: 420px;"></div>
    </div>
  </section>

  <!-- Empty State -->
  <section id="empty-state" class="empty-state">
    <div class="empty-card" data-animate>
      <div class="empty-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
        </svg>
      </div>
      <h3 class="empty-title font-display">Select a currency pair</h3>
      <p class="empty-description">Choose your source and target currencies above to view historical exchange rates and markup percentages.</p>
    </div>
  </section>

  <!-- Request Archiving Link (only visible for non-archived pairs) -->
  <div id="archiving-section" style="text-align: center; padding: 1rem 2rem; display: none;">
    <p style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.5rem;">
      ⚠️ This pair is not archived on server. Only showing ~7 days of live data.
    </p>
    <a id="request-archiving" href="#" target="_blank" class="footer-link" style="font-size: 0.75rem;">
      <svg style="width: 14px; height: 14px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
      </svg>
      Request server-side archiving for 365 days of history
    </a>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <p class="footer-text">Data sourced from Visa. Historical data available from date of addition + 365 days.</p>
    <a href="https://github.com/avishj/ForexRadar" target="_blank" class="footer-link">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
      </svg>
      View on GitHub
    </a>
  </footer>

  <!-- Notification Container -->
  <div id="notification-container"></div>

  <!-- Theme Script (inline to prevent flash) -->
  <script>
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
      document.documentElement.classList.add('dark');
      document.documentElement.classList.remove('light');
    }
  </script>

  <!-- Load Scripts -->
  <script type="module" src="js/theme.js"></script>
  <script type="module" src="js/animations.js"></script>
  <script type="module" src="js/app.js"></script>
</body>

</html>
