---
import "../styles/global.css";
import dmSansFont from "../fonts/dm-sans-latin.woff2";
import spaceGroteskFont from "../fonts/space-grotesk-latin.woff2";
import { url } from '../utils/url.js';
const isProd = import.meta.env.PROD;
---

<!doctype html>
<html lang="en" class="dark">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		{isProd && <meta http-equiv="Content-Security-Policy" content="default-src 'self';
                 script-src 'self' 'sha256-hqqc1jsXeb0Z1tv3XwkzxzjoJ4h8dAW9+5mmtWNaNEw=';
                 style-src 'self' 'unsafe-inline';
                 font-src 'self';
                 connect-src 'self' https://avishj.github.io https://api.allorigins.win;
                 img-src 'self' data:;" />}
		<link rel="icon" type="image/svg+xml" href={url('/favicon.svg')} />
		<link rel="preload" href={dmSansFont} as="font" type="font/woff2" crossorigin />
		<link rel="preload" href={spaceGroteskFont} as="font" type="font/woff2" crossorigin />
		<title>Forex Radar: One stop solution to tracking Visa / Master Card exchange rates.</title>
		<meta name="description" content="Track historical Visa and Mastercard exchange rates with real markup percentages. See what you're actually paying when you swipe abroad." />

		<!-- Theme Script (inline to prevent flash) -->
		<script is:inline>
			const savedTheme = localStorage.getItem("theme");
			// Default to dark mode if no saved preference
			if (savedTheme !== "light") {
				document.documentElement.classList.add("dark");
				document.documentElement.classList.remove("light");
			} else {
				document.documentElement.classList.add("light");
				document.documentElement.classList.remove("dark");
			}
		</script>
	</head>

	<body>
		<slot />

		<!-- Notification Container -->
		<div id="notification-container"></div>

		<!-- Load Scripts -->
		<script>
			import "../scripts/theme.js";
			import "../scripts/animations.js";
			import "../scripts/app.js";
		</script>
	</body>
</html>
